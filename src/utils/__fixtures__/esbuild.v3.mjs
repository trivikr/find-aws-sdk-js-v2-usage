var pi=Object.defineProperty;var Se=(t,e)=>()=>(t&&(e=t(t=0)),e);var mi=(t,e)=>{for(var r in e)pi(t,r,{get:e[r],enumerable:!0})};var H,jt=Se(()=>{H=t=>new TextEncoder().encode(t)});var te,Jr=Se(()=>{jt();te=t=>typeof t=="string"?H(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)});var X,Xr=Se(()=>{X=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)}});var j=Se(()=>{jt();Jr();Xr()});var Zt,ho=Se(()=>{j();Zt=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:o,serdeContext:n,defaultContentType:s}){this.marshaller=e,this.serializer=r,this.deserializer=o,this.serdeContext=n,this.defaultContentType=s}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:o}){let n=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),c=this.serializer,u=this.defaultContentType,a=Symbol("initialRequestMarker"),f={async*[Symbol.asyncIterator](){if(o){let d={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:u}};c.write(r,o);let l=c.flush();yield{[a]:!0,headers:d,body:l}}for await(let d of e)yield d}};return n.serialize(f,d=>{if(d[a])return{headers:d.headers,body:d.body};let l=Object.keys(d).find(y=>y!=="__type")??"",{additionalHeaders:p,body:m,eventType:g,explicitPayloadContentType:h}=this.writeEventBody(l,i,d);return{headers:{":event-type":{type:"string",value:g},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:h??u},...p},body:m}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:o}){let n=this.marshaller,s=r.getEventStreamMember(),c=r.getMemberSchema(s).getMemberSchemas(),u=Symbol("initialResponseMarker"),a=n.deserialize(e.body,async l=>{let p=Object.keys(l).find(g=>g!=="__type")??"",m=l[p].body;if(p==="initial-response"){let g=await this.deserializer.read(r,m);return delete g[s],{[u]:!0,...g}}else if(p in c){let g=c[p];if(g.isStructSchema()){let h={},S=!1;for(let[y,R]of g.structIterator()){let{eventHeader:A,eventPayload:k}=R.getMergedTraits();if(S=S||!!(A||k),k)R.isBlobSchema()?h[y]=m:R.isStringSchema()?h[y]=(this.serdeContext?.utf8Encoder??X)(m):R.isStructSchema()&&(h[y]=await this.deserializer.read(R,m));else if(A){let O=l[p].headers[y]?.value;O!=null&&(R.isNumericSchema()?O&&typeof O=="object"&&"bytes"in O?h[y]=BigInt(O.toString()):h[y]=Number(O):h[y]=O)}}if(S)return{[p]:h}}return{[p]:await this.deserializer.read(g,m)}}else return{$unknown:l}}),f=a[Symbol.asyncIterator](),d=await f.next();if(d.done)return a;if(d.value?.[u]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[l,p]of Object.entries(d.value))o[l]=p}return{async*[Symbol.asyncIterator](){for(d?.value?.[u]||(yield d.value);;){let{done:l,value:p}=await f.next();if(l)break;yield p}}}}writeEventBody(e,r,o){let n=this.serializer,s=e,i=null,c,u=r.getSchema()[4].includes(e),a={};if(u){let l=r.getMemberSchema(e);if(l.isStructSchema()){for(let[p,m]of l.structIterator()){let{eventHeader:g,eventPayload:h}=m.getMergedTraits();if(h)i=p;else if(g){let S=o[e][p],y="binary";m.isNumericSchema()?(-2)**31<=S&&S<=2**31-1?y="integer":y="long":m.isTimestampSchema()?y="timestamp":m.isStringSchema()?y="string":m.isBooleanSchema()&&(y="boolean"),S!=null&&(a[p]={type:y,value:S},delete o[e][p])}}if(i!==null){let p=l.getMemberSchema(i);p.isBlobSchema()?c="application/octet-stream":p.isStringSchema()&&(c="text/plain"),n.write(p,o[e][i])}else n.write(l,o[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[l,p]=o[e];s=l,n.write(15,p)}let f=n.flush();return{body:typeof f=="string"?(this.serdeContext?.utf8Decoder??H)(f):f,eventType:s,explicitPayloadContentType:c,additionalHeaders:a}}}});var go={};mi(go,{EventStreamSerde:()=>Zt});var yo=Se(()=>{ho()});var Nr=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),kr=t=>({httpHandler:t.httpHandler()});var Ee;(function(t){t.HTTP="http",t.HTTPS="https"})(Ee||(Ee={}));var xe;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(xe||(xe={}));var Ue="__smithy_context";var v=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=hi(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function hi(t){return Object.keys(t).reduce((e,r)=>{let o=t[r];return{...e,[r]:Array.isArray(o)?[...o]:o}},{})}var U=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var gi=t=>e=>async r=>{if(!v.isInstance(r.request))return e(r);let{request:o}=r,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;o.port!=null&&(s+=`:${o.port}`),o.headers.host=s}return e(r)},yi={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},$r=t=>({applyToStack:e=>{e.add(gi(t),yi)}});var Si=()=>(t,e)=>async r=>{try{let o=await t(r),{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:a}=c,f=u??e.inputFilterSensitiveLog,d=a??e.outputFilterSensitiveLog,{$metadata:l,...p}=o.output;return i?.info?.({clientName:n,commandName:s,input:f(r.input),output:d(p),metadata:l}),o}catch(o){let{clientName:n,commandName:s,logger:i,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:u}=c,a=u??e.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:s,input:a(r.input),error:o,metadata:o.$metadata}),o}},Ei={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Ur=t=>({applyToStack:e=>{e.add(Si(),Ei)}});var Lr={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var Hr=()=>t=>async e=>t(e);var Fr=t=>({applyToStack:e=>{e.add(Hr(),Lr)}});var z=t=>t[Ue]||(t[Ue]={});var L=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};var zr=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let o of e)for(let n of t)n.schemeId.split("#")[1]===o&&r.push(n);for(let o of t)r.find(({schemeId:n})=>n===o.schemeId)||r.push(o);return r};function xi(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var jr=(t,e)=>(r,o)=>async n=>{let s=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,o,n.input)),i=t.authSchemePreference?await t.authSchemePreference():[],c=zr(s,i),u=xi(t.httpAuthSchemes),a=z(o),f=[];for(let d of c){let l=u.get(d.schemeId);if(!l){f.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let p=l.identityProvider(await e.identityProviderConfigProvider(t));if(!p){f.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:m={},signingProperties:g={}}=d.propertiesExtractor?.(t,o)||{};d.identityProperties=Object.assign(d.identityProperties||{},m),d.signingProperties=Object.assign(d.signingProperties||{},g),a.selectedHttpAuthScheme={httpAuthOption:d,identity:await p(d.identityProperties),signer:l.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(n)};var wi={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Br=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:o=>{o.addRelativeTo(jr(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),wi)}});var Gr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};var bi=t=>e=>{throw e},Ti=(t,e)=>{},Wr=t=>(e,r)=>async o=>{if(!v.isInstance(o.request))return e(o);let s=z(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:c,signer:u}=s,a=await e({...o,request:await u.sign(o.request,c,i)}).catch((u.errorHandler||bi)(i));return(u.successHandler||Ti)(a.response,i),a};var Ri={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},qr=t=>({applyToStack:e=>{e.addRelativeTo(Wr(t),Ri)}});var de=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};var Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zt=Object.entries(Vr).reduce((t,[e,r])=>(t[r]=Number(e),t),{}),Kr=Vr.split(""),ie=6,le=8,Yr=63;var ee=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;let r=new ArrayBuffer(e),o=new DataView(r);for(let n=0;n<t.length;n+=4){let s=0,i=0;for(let a=n,f=n+3;a<=f;a++)if(t[a]!=="="){if(!(t[a]in zt))throw new TypeError(`Invalid character ${t[a]} in base64 string.`);s|=zt[t[a]]<<(f-a)*ie,i+=ie}else s>>=ie;let c=n/4*3;s>>=i%le;let u=Math.floor(i/le);for(let a=0;a<u;a++){let f=(u-a-1)*le;o.setUint8(c+a,(s&255<<f)>>f)}}return new Uint8Array(r)};j();function we(t){let e;typeof t=="string"?e=H(t):e=t;let r=typeof e=="object"&&typeof e.length=="number",o=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!o)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let n="";for(let s=0;s<e.length;s+=3){let i=0,c=0;for(let a=s,f=Math.min(s+3,e.length);a<f;a++)i|=e[a]<<(f-a-1)*le,c+=le;let u=Math.ceil(c/ie);i<<=u*ie-c;for(let a=1;a<=u;a++){let f=(u-a)*ie;n+=Kr[(i&Yr<<f)>>f]}n+="==".slice(0,4-u)}return n}j();var be=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(ee(e)):t.mutate(H(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?we(this):X(this)}};var Q=t=>encodeURIComponent(t).replace(/[!'()*]/g,Ai),Ai=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Qr(t){let e=[];for(let r of Object.keys(t).sort()){let o=t[r];if(r=Q(r),Array.isArray(o))for(let n=0,s=o.length;n<s;n++)e.push(`${r}=${Q(o[n])}`);else{let n=r;(o||typeof o=="string")&&(n+=`=${Q(o)}`),e.push(n)}}return e.join("&")}function Bt(t,e){return new Request(t,e)}function Zr(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let o=new Error(`Request did not complete within ${t} ms`);o.name="TimeoutError",r(o)},t)})}var Gt={supported:void 0},Ve=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Gt.supported===void 0&&(Gt.supported=typeof Request<"u"&&"keepalive"in Bt("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:o}={}){this.config||(this.config=await this.configProvider);let n=o??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let y=new Error("Request aborted");return y.name="AbortError",Promise.reject(y)}let c=e.path,u=Qr(e.query||{});u&&(c+=`?${u}`),e.fragment&&(c+=`#${e.fragment}`);let a="";if(e.username!=null||e.password!=null){let y=e.username??"",R=e.password??"";a=`${y}:${R}@`}let{port:f,method:d}=e,l=`${e.protocol}//${a}${e.hostname}${f?`:${f}`:""}${c}`,p=d==="GET"||d==="HEAD"?void 0:e.body,m={body:p,headers:new Headers(e.headers),method:d,credentials:i};this.config?.cache&&(m.cache=this.config.cache),p&&(m.duplex="half"),typeof AbortController<"u"&&(m.signal=r),Gt.supported&&(m.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(m,this.config.requestInit(e));let g=()=>{},h=Bt(l,m),S=[fetch(h).then(y=>{let R=y.headers,A={};for(let O of R.entries())A[O[0]]=O[1];return y.body!=null?{response:new U({headers:A,reason:y.statusText,statusCode:y.status,body:y.body})}:y.blob().then(O=>({response:new U({headers:A,reason:y.statusText,statusCode:y.status,body:O})}))}),Zr(n)];return r&&S.push(new Promise((y,R)=>{let A=()=>{let k=new Error("Request aborted");k.name="AbortError",R(k)};if(typeof r.addEventListener=="function"){let k=r;k.addEventListener("abort",A,{once:!0}),g=()=>k.removeEventListener("abort",A)}else r.onabort=A})),Promise.race(S).finally(g)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(o=>(o[e]=r,o))}httpHandlerConfigs(){return this.config??{}}};var eo=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):_i(t):vi(t);async function _i(t){let e=await Ci(t),r=ee(e);return new Uint8Array(r)}async function vi(t){let e=[],r=t.getReader(),o=!1,n=0;for(;!o;){let{done:c,value:u}=await r.read();u&&(e.push(u),n+=u.length),o=c}let s=new Uint8Array(n),i=0;for(let c of e)s.set(c,i),i+=c.length;return s}function Ci(t){return new Promise((e,r)=>{let o=new FileReader;o.onloadend=()=>{if(o.readyState!==2)return r(new Error("Reader aborted too early"));let n=o.result??"",s=n.indexOf(","),i=s>-1?s+1:n.length;e(n.substring(i))},o.onabort=()=>r(new Error("Read aborted")),o.onerror=()=>r(o.error),o.readAsDataURL(t)})}var to={},Wt={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),to[t]=e,Wt[e]=t}function ro(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let o=t.slice(r,r+2).toLowerCase();if(o in Wt)e[r/2]=Wt[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return e}function B(t){let e="";for(let r=0;r<t.byteLength;r++)e+=to[t[r]];return e}var Te=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return be.mutate(t);if(!t)return be.mutate(new Uint8Array);let r=e.streamCollector(t);return be.mutate(await r)};function qt(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Re=t=>typeof t=="function"?t():t;var Ke=(t,e,r,o,n)=>({name:e,namespace:t,traits:r,input:o,output:n});var oo=t=>(e,r)=>async o=>{let{response:n}=await e(o),{operationSchema:s}=z(r),[,i,c,u,a,f]=s??[];try{let d=await t.protocol.deserializeResponse(Ke(i,c,u,a,f),{...t,...r},n);return{response:n,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in d)){let l="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+l}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(l):r.logger?.warn?.(l)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(U.isInstance(n)){let{headers:p={}}=n,m=Object.entries(p);d.$metadata={httpStatusCode:n.statusCode,requestId:Vt(/^x-[\w-]+-request-?id$/,m),extendedRequestId:Vt(/^x-[\w-]+-id-2$/,m),cfId:Vt(/^x-[\w-]+-cf-id$/,m)}}}catch{}}throw d}},Vt=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1];var no=t=>(e,r)=>async o=>{let{operationSchema:n}=z(r),[,s,i,c,u,a]=n??[],f=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(Ke(s,i,c,u,a),o.input,{...t,...r,endpoint:f});return e({...o,request:d})};var Ii={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Pi={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function so(t){return{applyToStack:e=>{e.add(no(t),Pi),e.add(oo(t),Ii),t.protocol.setSerdeContext(t)}}}function fe(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let o of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[o]=1);return e}var b=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let o=[],n=e,s=e;for(this._isMemberSchema=!1;Kt(n);)o.push(n[1]),n=n[0],s=Re(n),this._isMemberSchema=!0;if(o.length>0){this.memberTraits={};for(let i=o.length-1;i>=0;--i){let c=o[i];Object.assign(this.memberTraits,fe(c))}}else this.memberTraits=0;if(s instanceof t){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=Re(s),Di(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(s),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Re(e);if(r instanceof t)return r;if(Kt(r)){let[o,n]=r;if(o instanceof t)return Object.assign(o.getMergedTraits(),fe(n)),o;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:o,memberTraits:n}=this;return e(r)||e(o)||e(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return fe(this.memberTraits)}getOwnTraits(){return fe(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let o=this.getSchema(),n=e?15:o[4]??0;return Le([n,0],"key")}getValueSchema(){let e=this.getSchema(),[r,o,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof e=="number"?63&e:e&&typeof e=="object"&&(o||n)?e[3+e[0]]:r?15:void 0;if(s!=null)return Le([s,0],o?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let o=r[4].indexOf(e),n=r[5][o];return Le(Kt(n)?n:[n,0],e)}if(this.isDocumentSchema())return Le([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,o]of this.structIterator())e[r]=o}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],Le([e[5][r],0],e[4][r])]}};function Le(t,e){if(t instanceof b)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=b;return new r(t,e)}var Kt=t=>Array.isArray(t)&&t.length===2,Di=t=>Array.isArray(t)&&t.length>=5;var C=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,o=new Map){this.namespace=e,this.schemas=r,this.exceptions=o}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let o=this.normalizeShapeId(e);t.for(o.split("#")[0]).schemas.set(o,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let o=e,n=t.for(o[1]);n.schemas.set(o[1]+"#"+o[2],o),n.exceptions.set(o,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,o]=e,n=r+"#"+o;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};var Oi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Mi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function io(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),o=t.getUTCDay(),n=t.getUTCDate(),s=t.getUTCHours(),i=t.getUTCMinutes(),c=t.getUTCSeconds(),u=n<10?`0${n}`:`${n}`,a=s<10?`0${s}`:`${s}`,f=i<10?`0${i}`:`${i}`,d=c<10?`0${c}`:`${c}`;return`${Oi[o]}, ${u} ${Mi[r]} ${e} ${a}:${f}:${d} GMT`}var Wu=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var qu=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/);var Vu=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ku=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Yu=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Ju=50*365*24*60*60*1e3;var Yt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var M=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),He=()=>{if(Yt)return Yt();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,M[t[0]]+M[t[1]]+M[t[2]]+M[t[3]]+"-"+M[t[4]]+M[t[5]]+"-"+M[t[6]]+M[t[7]]+"-"+M[t[8]]+M[t[9]]+"-"+M[t[10]]+M[t[11]]+M[t[12]]+M[t[13]]+M[t[14]]+M[t[15]]};var ae=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};ae.from=t=>t&&typeof t=="object"&&(t instanceof ae||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?ae(String(t)):ae(JSON.stringify(t));ae.fromObject=ae.from;var Jt="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Xt="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Qt="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",ao="(\\d?\\d)",co="(\\d{4})",Ni=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),ki=new RegExp(`^${Jt}, ${ao} ${Xt} ${co} ${Qt} GMT$`),$i=new RegExp(`^${Jt}, ${ao}-${Xt}-(\\d\\d) ${Qt} GMT$`),Ui=new RegExp(`^${Jt} ${Xt} ( [1-9]|\\d\\d) ${Qt} ${co}$`),Li=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],uo=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},lo=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=Ni.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,o,n,s,i,c,,u,a]=e;re(o,1,12),re(n,1,31),re(s,0,23),re(i,0,59),re(c,0,60);let f=new Date(Date.UTC(Number(r),Number(o)-1,Number(n),Number(s),Number(i),Number(c),Number(u)?Math.round(parseFloat(`0.${u}`)*1e3):0));if(f.setUTCFullYear(Number(r)),a.toUpperCase()!="Z"){let[,d,l,p]=/([+-])(\d\d):(\d\d)/.exec(a)||[void 0,"+",0,0],m=d==="-"?1:-1;f.setTime(f.getTime()+m*(Number(l)*60*60*1e3+Number(p)*60*1e3))}return f},fo=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,o,n,s,i,c,u;if((u=ki.exec(t))?[,e,r,o,n,s,i,c]=u:(u=$i.exec(t))?([,e,r,o,n,s,i,c]=u,o=(Number(o)+1900).toString()):(u=Ui.exec(t))&&([,r,e,n,s,i,c,o]=u),o&&i){let a=Date.UTC(Number(o),Li.indexOf(r),Number(e),Number(n),Number(s),Number(i),c?Math.round(parseFloat(`0.${c}`)*1e3):0);re(e,1,31),re(n,0,23),re(s,0,59),re(i,0,60);let f=new Date(a);return f.setUTCFullYear(Number(o)),f}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function re(t,e,r){let o=Number(t);if(o<e||o>r)throw new Error(`Value ${o} out of range [${e}, ${r}]`)}var po=t=>{let e=t.length,r=[],o=!1,n,s=0;for(let i=0;i<e;++i){let c=t[i];switch(c){case'"':n!=="\\"&&(o=!o);break;case",":o||(r.push(t.slice(s,i)),s=i+1);break;default:}n=c}return r.push(t.slice(s)),r.map(i=>{i=i.trim();let c=i.length;return c<2?i:(i[0]==='"'&&i[c-1]==='"'&&(i=i.slice(1,c-1)),i.replace(/\\"/g,'"'))})};var mo=/^-?\d*(\.\d+)?$/,Ae=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!mo.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&mo.test(r.string)}};var _e=class{serdeContext;setSerdeContext(e){this.serdeContext=e}};var Ye=class extends _e{options;constructor(e){super(),this.options=e}getRequestType(){return v}getResponseType(){return U}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[o,n]of r.url.searchParams.entries())e.query[o]=n;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,o){let n=b.of(r.input),s=fe(r.traits??{});if(s.endpoint){let i=s.endpoint?.[0];if(typeof i=="string"){let c=[...n.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of c){let a=o[u];if(typeof a!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);i=i.replace(`{${u}}`,a)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:o}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:o})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:o}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:o})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(yo(),go));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,o,n,s){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}};var Je=class extends Ye{async serializeRequest(e,r,o){let n=this.serializer,s={},i={},c=await o.endpoint(),u=b.of(e?.input),a=u.getSchema(),f,d=new v({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});c&&(this.updateServiceEndpoint(d,c),this.setHostPrefix(d,e,r));let l={...r};if(r){let p=u.getEventStreamMember();if(p){if(l[p]){let m={};for(let[g,h]of u.structIterator())g!==p&&l[g]&&(n.write(h,l[g]),m[g]=n.flush());f=await this.serializeEventStream({eventStream:l[p],requestSchema:u,initialRequest:m})}}else n.write(a,l),f=n.flush()}return d.headers=i,d.query=s,d.body=f,d.method="POST",d}async deserializeResponse(e,r,o){let n=this.deserializer,s=b.of(e.output),i={};if(o.statusCode>=300){let u=await Te(o.body,r);throw u.byteLength>0&&Object.assign(i,await n.read(15,u)),await this.handleError(e,r,o,i,this.deserializeMetadata(o)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let u in o.headers){let a=o.headers[u];delete o.headers[u],o.headers[u.toLowerCase()]=a}let c=s.getEventStreamMember();if(c)i[c]=await this.deserializeEventStream({response:o,responseSchema:s,initialResponseContainer:i});else{let u=await Te(o.body,r);u.byteLength>0&&Object.assign(i,await n.read(s,u))}return i.$metadata=this.deserializeMetadata(o),i}};j();function Xe(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:o,httpHeader:n,httpQuery:s}=t.getMergedTraits();return(e.httpBindings?typeof o=="string"||n?6:s||r?5:void 0:void 0)??e.timestampFormat.default}var Qe=class extends _e{settings;constructor(e){super(),this.settings=e}read(e,r){let o=b.of(e);if(o.isListSchema())return po(r).map(n=>this.read(o.getValueSchema(),n));if(o.isBlobSchema())return(this.serdeContext?.base64Decoder??ee)(r);if(o.isTimestampSchema())switch(Xe(o,this.settings)){case 5:return lo(r);case 6:return fo(r);case 7:return uo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isStringSchema()){let n=o.getMergedTraits().mediaType,s=r;if(n)return o.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(n==="application/json"||n.endsWith("+json"))&&(s=ae.from(s)),s}return o.isNumericSchema()?Number(r):o.isBigIntegerSchema()?BigInt(r):o.isBigDecimalSchema()?new Ae(r,"bigDecimal"):o.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??X)((this.serdeContext?.base64Decoder??ee)(e))}};function So(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var Ze=class{authSchemes=new Map;constructor(e){for(let[r,o]of Object.entries(e))o!==void 0&&this.authSchemes.set(r,o)}getIdentityProvider(e){return this.authSchemes.get(e)}};var et=class{async sign(e,r,o){return e}};var Hi=t=>function(r){return er(r)&&r.expiration.getTime()-Date.now()<t};var Eo=Hi(3e5),er=t=>t.expiration!==void 0,xo=(t,e,r)=>{if(t===void 0)return;let o=typeof t!="function"?async()=>Promise.resolve(t):t,n,s,i,c=!1,u=async a=>{s||(s=o(a));try{n=await s,i=!0,c=!1}finally{s=void 0}return n};return e===void 0?async a=>((!i||a?.forceRefresh)&&(n=await u(a)),n):async a=>((!i||a?.forceRefresh)&&(n=await u(a)),c?n:r(n)?(e(n)&&await u(a),n):(c=!0,n))};var Fi=void 0;function zi(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function wo(t){let e=de(t.userAgentAppId??Fi),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let o=await e();if(!zi(o)){let n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof o!="string"?n?.warn("userAgentAppId must be a string or undefined."):o.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return o}})}var tt=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let o=this.hash(e);if(o===!1)return r();if(!this.data.has(o)){if(this.data.size>this.capacity+10){let n=this.data.keys(),s=0;for(;;){let{value:i,done:c}=n.next();if(this.data.delete(i),c||++s>10)break}}this.data.set(o,r())}return this.data.get(o)}size(){return this.data.size}hash(e){let r="",{parameters:o}=this;if(o.length===0)return!1;for(let n of o){let s=String(e[n]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}};var ji=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Fe=t=>ji.test(t)||t.startsWith("[")&&t.endsWith("]");var Bi=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),pe=(t,e=!1)=>{if(!e)return Bi.test(t);let r=t.split(".");for(let o of r)if(!pe(o))return!1;return!0};var me={};var oe="endpoints";function G(t){return typeof t!="object"||t==null?t:"ref"in t?`$${G(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(G).join(", ")})`:JSON.stringify(t,null,2)}var T=class extends Error{constructor(e){super(e),this.name="EndpointError"}};var bo=(t,e)=>t===e;var To=t=>{let e=t.split("."),r=[];for(let o of e){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new T(`Path: '${t}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new T(`Invalid array index: '${s}' in path: '${t}'`);n!==0&&r.push(o.slice(0,n)),r.push(s)}else r.push(o)}return r};var rt=(t,e)=>To(e).reduce((r,o)=>{if(typeof r!="object")throw new T(`Index '${o}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(o)]:r[o]},t);var Ro=t=>t!=null;var Ao=t=>!t;var tr={[Ee.HTTP]:80,[Ee.HTTPS]:443},_o=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:l,port:p,protocol:m="",path:g="",query:h={}}=t,S=new URL(`${m}//${l}${p?`:${p}`:""}${g}`);return S.search=Object.entries(h).map(([y,R])=>`${y}=${R}`).join("&"),S}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:o,hostname:n,pathname:s,protocol:i,search:c}=e;if(c)return null;let u=i.slice(0,-1);if(!Object.values(Ee).includes(u))return null;let a=Fe(n),f=r.includes(`${o}:${tr[u]}`)||typeof t=="string"&&t.includes(`${o}:${tr[u]}`),d=`${o}${f?`:${tr[u]}`:""}`;return{scheme:u,authority:d,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:a}};var vo=(t,e)=>t===e;var Co=(t,e,r,o)=>e>=r||t.length<r?null:o?t.substring(t.length-r,t.length-e):t.substring(e,r);var Io=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);var Po={booleanEquals:bo,getAttr:rt,isSet:Ro,isValidHostLabel:pe,not:Ao,parseURL:_o,stringEquals:vo,substring:Co,uriEncode:Io};var ot=(t,e)=>{let r=[],o={...e.endpointParams,...e.referenceRecord},n=0;for(;n<t.length;){let s=t.indexOf("{",n);if(s===-1){r.push(t.slice(n));break}r.push(t.slice(n,s));let i=t.indexOf("}",s);if(i===-1){r.push(t.slice(s));break}t[s+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(s+1,i)),n=i+2);let c=t.substring(s+1,i);if(c.includes("#")){let[u,a]=c.split("#");r.push(rt(o[u],a))}else r.push(o[c]);n=i+1}return r.join("")};var Do=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t];var he=(t,e,r)=>{if(typeof t=="string")return ot(t,r);if(t.fn)return Oo.callFunction(t,r);if(t.ref)return Do(t,r);throw new T(`'${e}': ${String(t)} is not a string, function or reference.`)},nt=({fn:t,argv:e},r)=>{let o=e.map(s=>["boolean","number"].includes(typeof s)?s:Oo.evaluateExpression(s,"arg",r)),n=t.split(".");return n[0]in me&&n[1]!=null?me[n[0]][n[1]](...o):Po[t](...o)},Oo={evaluateExpression:he,callFunction:nt};var Mo=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new T(`'${t}' is already defined in Reference Record.`);let o=nt(e,r);return r.logger?.debug?.(`${oe} evaluateCondition: ${G(e)} = ${G(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}};var ve=(t=[],e)=>{let r={};for(let o of t){let{result:n,toAssign:s}=Mo(o,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!n)return{result:n};s&&(r[s.name]=s.value,e.logger?.debug?.(`${oe} assign: ${s.name} := ${G(s.value)}`))}return{result:!0,referenceRecord:r}};var No=(t,e)=>Object.entries(t).reduce((r,[o,n])=>({...r,[o]:n.map(s=>{let i=he(s,"Header value entry",e);if(typeof i!="string")throw new T(`Header '${o}' value '${i}' is not a string`);return i})}),{});var rr=(t,e)=>Object.entries(t).reduce((r,[o,n])=>({...r,[o]:$o.getEndpointProperty(n,e)}),{}),ko=(t,e)=>{if(Array.isArray(t))return t.map(r=>ko(r,e));switch(typeof t){case"string":return ot(t,e);case"object":if(t===null)throw new T(`Unexpected endpoint property: ${t}`);return $o.getEndpointProperties(t,e);case"boolean":return t;default:throw new T(`Unexpected endpoint property type: ${typeof t}`)}},$o={getEndpointProperty:ko,getEndpointProperties:rr};var Uo=(t,e)=>{let r=he(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new T(`Endpoint URL must be a string, got ${typeof r}`)};var Lo=(t,e)=>{let{conditions:r,endpoint:o}=t,{result:n,referenceRecord:s}=ve(r,e);if(!n)return;let i={...e,referenceRecord:{...e.referenceRecord,...s}},{url:c,properties:u,headers:a}=o;return e.logger?.debug?.(`${oe} Resolving endpoint from template: ${G(o)}`),{...a!=null&&{headers:No(a,i)},...u!=null&&{properties:rr(u,i)},url:Uo(c,i)}};var Ho=(t,e)=>{let{conditions:r,error:o}=t,{result:n,referenceRecord:s}=ve(r,e);if(n)throw new T(he(o,"Error",{...e,referenceRecord:{...e.referenceRecord,...s}}))};var or=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let o=Lo(r,e);if(o)return o}else if(r.type==="error")Ho(r,e);else if(r.type==="tree"){let o=Fo.evaluateTreeRule(r,e);if(o)return o}else throw new T(`Unknown endpoint rule: ${r}`);throw new T("Rules evaluation failed")},Gi=(t,e)=>{let{conditions:r,rules:o}=t,{result:n,referenceRecord:s}=ve(r,e);if(n)return Fo.evaluateRules(o,{...e,referenceRecord:{...e.referenceRecord,...s}})},Fo={evaluateRules:or,evaluateTreeRule:Gi};var zo=(t,e)=>{let{endpointParams:r,logger:o}=e,{parameters:n,rules:s}=t;e.logger?.debug?.(`${oe} Initial EndpointParams: ${G(r)}`);let i=Object.entries(n).filter(([,a])=>a.default!=null).map(([a,f])=>[a,f.default]);if(i.length>0)for(let[a,f]of i)r[a]=r[a]??f;let c=Object.entries(n).filter(([,a])=>a.required).map(([a])=>a);for(let a of c)if(r[a]==null)throw new T(`Missing required parameter: '${a}'`);let u=or(s,{endpointParams:r,logger:o,referenceRecord:{}});return e.logger?.debug?.(`${oe} Resolved endpoint: ${G(u)}`),u};var nr=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!nr(r))return!1;return!0}return!(!pe(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Fe(t))};var jo=t=>{let e=t.split(":");if(e.length<6)return null;let[r,o,n,s,i,...c]=e;if(r!=="arn"||o===""||n===""||c.join(":")==="")return null;let u=c.map(a=>a.split("/")).flat();return{partition:o,service:n,region:s,accountId:i,resourceId:u}};var Bo={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],version:"1.1"};var qi=Bo,Vi="",Go=t=>{let{partitions:e}=qi;for(let o of e){let{regions:n,outputs:s}=o;for(let[i,c]of Object.entries(n))if(i===t)return{...s,...c}}for(let o of e){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(t))return{...s}}let r=e.find(o=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var Wo=()=>Vi;var sr={isVirtualHostableS3Bucket:nr,parseArn:jo,partition:Go};me.aws=sr;function qo(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[o,n=null]=r.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in e?Array.isArray(e[o])?e[o].push(n):e[o]=[e[o],n]:e[o]=n}return e}var Ce=t=>{if(typeof t=="string")return Ce(new URL(t));let{hostname:e,pathname:r,port:o,protocol:n,search:s}=t,i;return s&&(i=qo(s)),{hostname:e,port:o?parseInt(o):void 0,protocol:n,path:r,query:i}};function Vo(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function J(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var ir=t=>U.isInstance(t)?t.headers?.date??t.headers?.Date:void 0;var st=t=>new Date(Date.now()+t);var Ko=(t,e)=>Math.abs(st(e).getTime()-t)>=3e5;var ar=(t,e)=>{let r=Date.parse(t);return Ko(r,e)?r-Date.now():e};var ze=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Yo=async t=>{let e=ze("context",t.context),r=ze("config",t.config),o=e.endpointV2?.properties?.authSchemes?.[0],s=await ze("signer",r.signer)(o),i=t?.signingRegion,c=t?.signingRegionSet,u=t?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:c,signingName:u}},je=class{async sign(e,r,o){if(!v.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Yo(o),{config:s,signer:i}=n,{signingRegion:c,signingName:u}=n,a=o.context;if(a?.authSchemes?.length??!1){let[d,l]=a.authSchemes;d?.name==="sigv4a"&&l?.name==="sigv4"&&(c=l?.signingRegion??c,u=l?.signingName??u)}return await i.sign(e,{signingDate:st(s.systemClockOffset),signingRegion:c,signingService:u})}errorHandler(e){return r=>{let o=r.ServerTime??ir(r.$response);if(o){let n=ze("config",e.config),s=n.systemClockOffset;n.systemClockOffset=ar(o,n.systemClockOffset),n.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let o=ir(e);if(o){let n=ze("config",r.config);n.systemClockOffset=ar(o,n.systemClockOffset)}}};var Jo=(t,e,r)=>{let o,n,s,i=!1,c=async()=>{n||(n=t());try{o=await n,s=!0,i=!1}finally{n=void 0}return o};return e===void 0?async u=>((!s||u?.forceRefresh)&&(o=await c()),o):async u=>((!s||u?.forceRefresh)&&(o=await c()),i?o:r&&!r(o)?(i=!0,o):(e(o)&&await c(),o))};j();var Xo="X-Amz-Algorithm",Qo="X-Amz-Credential",cr="X-Amz-Date",Zo="X-Amz-SignedHeaders",en="X-Amz-Expires",ur="X-Amz-Signature",dr="X-Amz-Security-Token";var lr="authorization",fr=cr.toLowerCase(),Ki="date",tn=[lr,fr,Ki],rn=ur.toLowerCase(),Be="x-amz-content-sha256",on=dr.toLowerCase();var nn={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},sn=/^proxy-/,an=/^sec-/;var it="AWS4-HMAC-SHA256";var cn="AWS4-HMAC-SHA256-PAYLOAD",un="UNSIGNED-PAYLOAD",dn=50,pr="aws4_request",ln=3600*24*7;j();var at={},mr=[],ct=(t,e,r)=>`${t}/${e}/${r}/${pr}`,pn=async(t,e,r,o,n)=>{let s=await fn(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${o}:${n}:${B(s)}:${e.sessionToken}`;if(i in at)return at[i];for(mr.push(i);mr.length>dn;)delete at[mr.shift()];let c=`AWS4${e.secretAccessKey}`;for(let u of[r,o,n,pr])c=await fn(t,c,u);return at[i]=c};var fn=(t,e,r)=>{let o=new t(e);return o.update(te(r)),o.digest()};var hr=({headers:t},e,r)=>{let o={};for(let n of Object.keys(t).sort()){if(t[n]==null)continue;let s=n.toLowerCase();(s in nn||e?.has(s)||sn.test(s)||an.test(s))&&(!r||r&&!r.has(s))||(o[s]=t[n].trim().replace(/\s+/g," "))}return o};var mn=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";j();var ut=async({headers:t,body:e},r)=>{for(let o of Object.keys(t))if(o.toLowerCase()===Be)return t[o];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||mn(e)){let o=new r;return o.update(te(e)),B(await o.digest())}return un};j();var dt=class{format(e){let r=[];for(let s of Object.keys(e)){let i=H(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[s]))}let o=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),n=0;for(let s of r)o.set(s,n),n+=s.byteLength;return o}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let o=new DataView(new ArrayBuffer(5));return o.setUint8(0,4),o.setInt32(1,e.value,!1),new Uint8Array(o.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(e.value,3),i;case"string":let c=H(e.value),u=new DataView(new ArrayBuffer(3+c.byteLength));u.setUint8(0,7),u.setUint16(1,c.byteLength,!1);let a=new Uint8Array(u.buffer);return a.set(c,3),a;case"timestamp":let f=new Uint8Array(9);return f[0]=8,f.set(gr.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!Yi.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(ro(e.value.replace(/\-/g,"")),1),d}}},hn;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(hn||(hn={}));var Yi=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,gr=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let o=7,n=Math.abs(Math.round(e));o>-1&&n>0;o--,n/=256)r[o]=n;return e<0&&gn(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&gn(e),parseInt(B(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function gn(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var yn=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1};var Sn=(t,e={})=>{let{headers:r,query:o={}}=v.clone(t);for(let n of Object.keys(r)){let s=n.toLowerCase();(s.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(s)||e.hoistableHeaders?.has(s))&&(o[n]=r[n],delete r[n])}return{...t,headers:r,query:o}};var yr=t=>{t=v.clone(t);for(let e of Object.keys(t.headers))tn.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t};j();var En=({query:t={}})=>{let e=[],r={};for(let o of Object.keys(t)){if(o.toLowerCase()===rn)continue;let n=Q(o);e.push(n);let s=t[o];typeof s=="string"?r[n]=`${n}=${Q(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).reduce((i,c)=>i.concat([`${n}=${Q(c)}`]),[]).sort().join("&"))}return e.sort().map(o=>r[o]).filter(o=>o).join("&")};var xn=t=>Ji(t).toISOString().replace(/\.\d{3}Z$/,"Z"),Ji=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;var lt=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i=!0}){this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=L(o),this.credentialProvider=L(r)}createCanonicalRequest(e,r,o){let n=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${En(e)}
${n.map(s=>`${s}:${r[s]}`).join(`
`)}

${n.join(";")}
${o}`}async createStringToSign(e,r,o,n){let s=new this.sha256;s.update(te(o));let i=await s.digest();return`${n}
${e}
${r}
${B(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let s of e.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let o=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Q(o).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=xn(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}};var Ge=class extends lt{headerFormatter=new dt;constructor({applyChecksum:e,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i})}async presign(e,r={}){let{signingDate:o=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:c,hoistableHeaders:u,signingRegion:a,signingService:f}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);let l=a??await this.regionProvider(),{longDate:p,shortDate:m}=this.formatDate(o);if(n>ln)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let g=ct(m,l,f??this.service),h=Sn(yr(e),{unhoistableHeaders:i,hoistableHeaders:u});d.sessionToken&&(h.query[dr]=d.sessionToken),h.query[Xo]=it,h.query[Qo]=`${d.accessKeyId}/${g}`,h.query[cr]=p,h.query[en]=n.toString(10);let S=hr(h,s,c);return h.query[Zo]=this.getCanonicalHeaderList(S),h.query[ur]=await this.getSignature(p,g,this.getSigningKey(d,l,m,f),this.createCanonicalRequest(h,S,await ut(e,this.sha256))),h}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:o=new Date,priorSignature:n,signingRegion:s,signingService:i}){let c=s??await this.regionProvider(),{shortDate:u,longDate:a}=this.formatDate(o),f=ct(u,c,i??this.service),d=await ut({headers:{},body:r},this.sha256),l=new this.sha256;l.update(e);let p=B(await l.digest()),m=[cn,a,f,n,p,d].join(`
`);return this.signString(m,{signingDate:o,signingRegion:c,signingService:i})}async signMessage(e,{signingDate:r=new Date,signingRegion:o,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:o,signingService:n,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:r=new Date,signingRegion:o,signingService:n}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=o??await this.regionProvider(),{shortDate:c}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(s,i,c,n));return u.update(te(e)),B(await u.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:o,unsignableHeaders:n,signingRegion:s,signingService:i}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=s??await this.regionProvider(),a=yr(e),{longDate:f,shortDate:d}=this.formatDate(r),l=ct(d,u,i??this.service);a.headers[fr]=f,c.sessionToken&&(a.headers[on]=c.sessionToken);let p=await ut(a,this.sha256);!yn(Be,a.headers)&&this.applyChecksum&&(a.headers[Be]=p);let m=hr(a,n,o),g=await this.getSignature(f,l,this.getSigningKey(c,u,d,i),this.createCanonicalRequest(a,m,p));return a.headers[lr]=`${it} Credential=${c.accessKeyId}/${l}, SignedHeaders=${this.getCanonicalHeaderList(m)}, Signature=${g}`,a}async getSignature(e,r,o,n){let s=await this.createStringToSign(e,r,n,it),i=new this.sha256(await o);return i.update(te(s)),B(await i.digest())}getSigningKey(e,r,o,n){return pn(this.sha256,e,o,r,n||this.service)}};var wn=t=>{let e=t.credentials,r=!!t.credentials,o;Object.defineProperty(t,"credentials",{set(a){a&&a!==e&&a!==o&&(r=!0),e=a;let f=Xi(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=Qi(t,f);r&&!d.attributed?(o=async l=>d(l).then(p=>Vo(p,"CREDENTIALS_CODE","e")),o.memoized=d.memoized,o.configBound=d.configBound,o.attributed=!0):o=d},get(){return o},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:n=!0,systemClockOffset:s=t.systemClockOffset||0,sha256:i}=t,c;return t.signer?c=de(t.signer):t.regionInfoProvider?c=()=>de(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,f])=>{let{signingRegion:d,signingService:l}=a;t.signingRegion=t.signingRegion||d||f,t.signingName=t.signingName||l||t.serviceId;let p={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:n},m=t.signerConstructor||Ge;return new m(p)}):c=async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await de(t.region)(),properties:{}},a);let f=a.signingRegion,d=a.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||d||t.serviceId;let l={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:n},p=t.signerConstructor||Ge;return new p(l)},Object.assign(t,{systemClockOffset:s,signingEscapePath:n,signer:c})};function Xi(t,{credentials:e,credentialDefaultProvider:r}){let o;return e?e?.memoized?o=e:o=xo(e,Eo,er):r?o=de(r(Object.assign({},t,{parentClientConfig:t}))):o=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},o.memoized=!0,o}function Qi(t,e){if(e.configBound)return e;let r=async o=>e({...o,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var bn=typeof TextEncoder=="function"?new TextEncoder:null,Tn=t=>{if(typeof t=="string"){if(bn)return bn.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){let o=t.charCodeAt(r);o>127&&o<=2047?e++:o>2047&&o<=65535&&(e+=2),o>=56320&&o<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)};var ge=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let o of e)r.push(o);return r},ce=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Ie=()=>{let t=[],e=[],r=!1,o=new Set,n=d=>d.sort((l,p)=>Rn[p.step]-Rn[l.step]||An[p.priority||"normal"]-An[l.priority||"normal"]),s=d=>{let l=!1,p=m=>{let g=ge(m.name,m.aliases);if(g.includes(d)){l=!0;for(let h of g)o.delete(h);return!1}return!0};return t=t.filter(p),e=e.filter(p),l},i=d=>{let l=!1,p=m=>{if(m.middleware===d){l=!0;for(let g of ge(m.name,m.aliases))o.delete(g);return!1}return!0};return t=t.filter(p),e=e.filter(p),l},c=d=>(t.forEach(l=>{d.add(l.middleware,{...l})}),e.forEach(l=>{d.addRelativeTo(l.middleware,{...l})}),d.identifyOnResolve?.(f.identifyOnResolve()),d),u=d=>{let l=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?l.push(p):l.push(...u(p))}),l.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?l.push(p):l.push(...u(p))}),l},a=(d=!1)=>{let l=[],p=[],m={};return t.forEach(h=>{let S={...h,before:[],after:[]};for(let y of ge(S.name,S.aliases))m[y]=S;l.push(S)}),e.forEach(h=>{let S={...h,before:[],after:[]};for(let y of ge(S.name,S.aliases))m[y]=S;p.push(S)}),p.forEach(h=>{if(h.toMiddleware){let S=m[h.toMiddleware];if(S===void 0){if(d)return;throw new Error(`${h.toMiddleware} is not found when adding ${ce(h.name,h.aliases)} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&S.after.push(h),h.relation==="before"&&S.before.push(h)}}),n(l).map(u).reduce((h,S)=>(h.push(...S),h),[])},f={add:(d,l={})=>{let{name:p,override:m,aliases:g}=l,h={step:"initialize",priority:"normal",middleware:d,...l},S=ge(p,g);if(S.length>0){if(S.some(y=>o.has(y))){if(!m)throw new Error(`Duplicate middleware name '${ce(p,g)}'`);for(let y of S){let R=t.findIndex(k=>k.name===y||k.aliases?.some(O=>O===y));if(R===-1)continue;let A=t[R];if(A.step!==h.step||h.priority!==A.priority)throw new Error(`"${ce(A.name,A.aliases)}" middleware with ${A.priority} priority in ${A.step} step cannot be overridden by "${ce(p,g)}" middleware with ${h.priority} priority in ${h.step} step.`);t.splice(R,1)}}for(let y of S)o.add(y)}t.push(h)},addRelativeTo:(d,l)=>{let{name:p,override:m,aliases:g}=l,h={middleware:d,...l},S=ge(p,g);if(S.length>0){if(S.some(y=>o.has(y))){if(!m)throw new Error(`Duplicate middleware name '${ce(p,g)}'`);for(let y of S){let R=e.findIndex(k=>k.name===y||k.aliases?.some(O=>O===y));if(R===-1)continue;let A=e[R];if(A.toMiddleware!==h.toMiddleware||A.relation!==h.relation)throw new Error(`"${ce(A.name,A.aliases)}" middleware ${A.relation} "${A.toMiddleware}" middleware cannot be overridden by "${ce(p,g)}" middleware ${h.relation} "${h.toMiddleware}" middleware.`);e.splice(R,1)}}for(let y of S)o.add(y)}e.push(h)},clone:()=>c(Ie()),use:d=>{d.applyToStack(f)},remove:d=>typeof d=="string"?s(d):i(d),removeByTag:d=>{let l=!1,p=m=>{let{tags:g,name:h,aliases:S}=m;if(g&&g.includes(d)){let y=ge(h,S);for(let R of y)o.delete(R);return l=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),l},concat:d=>{let l=c(Ie());return l.use(d),l.identifyOnResolve(r||l.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),l},applyToStack:c,identify:()=>a(!0).map(d=>{let l=d.step??d.relation+" "+d.toMiddleware;return ce(d.name,d.aliases)+" - "+l}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,l)=>{for(let p of a().map(m=>m.middleware).reverse())d=p(d,l);return r&&console.log(f.identify()),d}};return f},Rn={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},An={high:3,normal:2,low:1};var ft=class{config;middlewareStack=Ie();initConfig;handlers;constructor(e){this.config=e}send(e,r,o){let n=typeof r!="function"?r:void 0,s=typeof r=="function"?r:o,i=n===void 0&&this.config.cacheMiddleware===!0,c;if(i){this.handlers||(this.handlers=new WeakMap);let u=this.handlers;u.has(e.constructor)?c=u.get(e.constructor):(c=e.resolveMiddleware(this.middlewareStack,this.config,n),u.set(e.constructor,c))}else delete this.handlers,c=e.resolveMiddleware(this.middlewareStack,this.config,n);if(s)c(e).then(u=>s(null,u.output),u=>s(u)).catch(()=>{});else return c(e).then(u=>u.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var Sr="***SensitiveInformation***";function pt(t,e){if(e==null)return e;let r=b.of(t);if(r.getMergedTraits().sensitive)return Sr;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Sr}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Sr}else if(r.isStructSchema()&&typeof e=="object"){let o=e,n={};for(let[s,i]of r.structIterator())o[s]!=null&&(n[s]=pt(i,o[s]));return n}return e}var We=class{middlewareStack=Ie();schema;static classBuilder(){return new Er}resolveMiddlewareWithContext(e,r,o,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:u,smithyContext:a,additionalContext:f,CommandCtor:d}){for(let h of n.bind(this)(d,e,r,o))this.middlewareStack.use(h);let l=e.concat(this.middlewareStack),{logger:p}=r,m={logger:p,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:u,[Ue]:{commandInstance:this,...a},...f},{requestHandler:g}=r;return l.resolve(h=>g.handle(h.request,o||{}),m)}},Er=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,o={}){return this._smithyContext={service:e,operation:r,...o},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=o=>o,r=o=>o){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends We{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[o]){super(),this.input=o??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(o,n,s){let i=e._operationSchema,c=i?.[4]??i?.input,u=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(o,n,s,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?pt.bind(null,c):a=>a),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?pt.bind(null,u):a=>a),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}};var mt=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},xr=(t,e={})=>{Object.entries(e).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(t[o]==null||t[o]==="")&&(t[o]=n)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t};var _n=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var vn=t=>{let e=[];for(let r in xe){let o=xe[r];t[o]!==void 0&&e.push({algorithmId:()=>o,checksumConstructor:()=>t[o]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Cn=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e};var In=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),Pn=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e};var Dn=t=>Object.assign(vn(t),In(t));var On=t=>Object.assign(Cn(t),Pn(t));var wr=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=wr(t[r]));return t};var Pe=class{trace(){}debug(){}info(){}warn(){}error(){}};var ht=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let o=r.getMemberSchemas(),n=Object.values(o).find(s=>!!s.getMergedTraits().httpPayload);if(n){let s=n.getMergedTraits().mediaType;return s||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(o).find(i=>{let{httpQuery:c,httpQueryParams:u,httpHeader:a,httpLabel:f,httpPrefixHeaders:d}=i.getMergedTraits();return!c&&!u&&!a&&!f&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,o,n,s,i){let c=r,u=e;e.includes("#")&&([c,u]=e.split("#"));let a={$metadata:s,$fault:o.statusCode<500?"client":"server"},f=C.for(c);try{return{errorSchema:i?.(f,u)??f.getSchema(e),errorMetadata:a}}catch{n.message=n.message??n.Message??"UnknownError";let l=C.for("smithy.ts.sdk.synthetic."+c),p=l.getBaseException();if(p){let m=l.getErrorCtor(p)??Error;throw this.decorateServiceException(Object.assign(new m({name:u}),a),n)}throw this.decorateServiceException(Object.assign(new Error(u),a),n)}}decorateServiceException(e,r={}){if(this.queryCompat){let o=e.Message??r.Message,n=xr(e,r);o&&(n.message=o),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??o};let s=n.$metadata.requestId;return s&&(n.RequestId=s),n}return xr(e,r)}setQueryCompatError(e,r){let o=r.headers?.["x-amzn-query-error"];if(e!==void 0&&o!=null){let[n,s]=o.split(";"),i=Object.entries(e),c={Code:n,Type:s};Object.assign(e,c);for(let[u,a]of i)c[u==="message"?"Message":u]=a;delete c.__type,e.Error=c}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(n=>b.of(n).getMergedTraits().awsQueryError?.[0]===r)}}};var De=class{serdeContext;setSerdeContext(e){this.serdeContext=e}};function*Mn(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let o=0;o<r[4].length;++o){let n=r[4][o],s=r[5][o],i=new b([s,0],n);!(n in e)&&!i.isIdempotencyToken()||(yield[n,i])}}var br;function Tr(t){br||(br=new DOMParser);let e=br.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");let r=o=>{if(o.nodeType===Node.TEXT_NODE&&o.textContent?.trim())return o.textContent;if(o.nodeType===Node.ELEMENT_NODE){let n=o;if(n.attributes.length===0&&n.childNodes.length===0)return"";let s={},i=Array.from(n.attributes);for(let u of i)s[`${u.name}`]=u.value;let c=Array.from(n.childNodes);for(let u of c){let a=r(u);if(a!=null){let f=u.nodeName;if(c.length===1&&i.length===0&&f==="#text")return a;s[f]?Array.isArray(s[f])?s[f].push(a):s[f]=[s[f],a]:s[f]=a}else if(c.length===1&&i.length===0)return n.textContent}return s}return null};return{[e.documentElement.nodeName]:r(e.documentElement)}}j();var gt=class extends De{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Qe(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,o){let n=b.of(e),s=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(s).find(a=>!!a.getMemberTraits().eventPayload)){let a={},f=Object.keys(s)[0];return s[f].isBlobSchema()?a[f]=r:a[f]=this.read(s[f],r),a}let c=(this.serdeContext?.utf8Encoder??X)(r),u=this.parseXml(c);return this.readSchema(e,o?u[o]:u)}readSchema(e,r){let o=b.of(e);if(o.isUnitSchema())return;let n=o.getMergedTraits();if(o.isListSchema()&&!Array.isArray(r))return this.readSchema(o,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!n.sparse,i=!!n.xmlFlattened;if(o.isListSchema()){let u=o.getValueSchema(),a=[],f=u.getMergedTraits().xmlName??"member",d=i?r:(r[0]??r)[f],l=Array.isArray(d)?d:[d];for(let p of l)(p!=null||s)&&a.push(this.readSchema(u,p));return a}let c={};if(o.isMapSchema()){let u=o.getKeySchema(),a=o.getValueSchema(),f;i?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];let d=u.getMergedTraits().xmlName??"key",l=a.getMergedTraits().xmlName??"value";for(let p of f){let m=p[d],g=p[l];(g!=null||s)&&(c[m]=this.readSchema(a,g))}return c}if(o.isStructSchema()){for(let[u,a]of o.structIterator()){let f=a.getMergedTraits(),d=f.httpPayload?f.xmlName??a.getName():a.getMemberTraits().xmlName??u;r[d]!=null&&(c[u]=this.readSchema(a,r[d]))}return c}if(o.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${o.getName(!0)}`)}return o.isListSchema()?[]:o.isMapSchema()||o.isStructSchema()?{}:this.stringDeserializer.read(o,r)}parseXml(e){if(e.length){let r;try{r=Tr(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let o="#text",n=Object.keys(r)[0],s=r[n];return s[o]&&(s[n]=s[o],delete s[o]),wr(s)}return{}}};var yt=class extends De{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,o=""){this.buffer===void 0&&(this.buffer="");let n=b.of(e);if(o&&!o.endsWith(".")&&(o+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(o),this.writeValue((this.serdeContext?.base64Encoder??we)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(o),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(o),this.writeValue(He()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(o),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(o),this.writeValue(r instanceof Ae?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(o),Xe(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(io(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(o),this.writeValue(""));else{let s=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,c=1;for(let u of r){if(u==null)continue;let a=this.getKey("member",s.getMergedTraits().xmlName),f=i?`${o}${c}`:`${o}${a}.${c}`;this.write(s,u,f),++c}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let s=n.getKeySchema(),i=n.getValueSchema(),c=n.getMergedTraits().xmlFlattened,u=1;for(let[a,f]of Object.entries(r)){if(f==null)continue;let d=this.getKey("key",s.getMergedTraits().xmlName),l=c?`${o}${u}.${d}`:`${o}entry.${u}.${d}`,p=this.getKey("value",i.getMergedTraits().xmlName),m=c?`${o}${u}.${p}`:`${o}entry.${u}.${p}`;this.write(s,a,l),this.write(i,f,m),++u}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[s,i]of Mn(n,r)){if(r[s]==null&&!i.isIdempotencyToken())continue;let c=this.getKey(s,i.getMergedTraits().xmlName),u=`${o}${c}`;this.write(i,r[s],u)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let o=r??e;return this.settings.capitalizeKeys?o[0].toUpperCase()+o.slice(1):o}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${qt(e)}=`}writeValue(e){this.buffer+=qt(e)}};var St=class extends Je{options;serializer;deserializer;mixin=new ht;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new yt(r),this.deserializer=new gt(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,o){let n=await super.serializeRequest(e,r,o);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Re(e.input)==="unit"||!n.body)&&(n.body="");let s=e.name.split("#")[1]??e.name;return n.body=`Action=${s}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(e,r,o){let n=this.deserializer,s=b.of(e.output),i={};if(o.statusCode>=300){let d=await Te(o.body,r);d.byteLength>0&&Object.assign(i,await n.read(15,d)),await this.handleError(e,r,o,i,this.deserializeMetadata(o))}for(let d in o.headers){let l=o.headers[d];delete o.headers[d],o.headers[d.toLowerCase()]=l}let c=e.name.split("#")[1]??e.name,u=s.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,a=await Te(o.body,r);return a.byteLength>0&&Object.assign(i,await n.read(s,a,u)),{$metadata:this.deserializeMetadata(o),...i}}useNestedResult(){return!0}async handleError(e,r,o,n,s){let i=this.loadQueryErrorCode(o,n)??"Unknown",c=this.loadQueryError(n),u=this.loadQueryErrorMessage(n);c.message=u,c.Error={Type:c.Type,Code:c.Code,Message:u};let{errorSchema:a,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,o,c,s,this.mixin.findQueryCompatibleError),d=b.of(a),l=C.for(a[1]).getErrorCtor(a)??Error,p=new l(u),m={Type:c.Error.Type,Code:c.Error.Code,Error:c.Error};for(let[g,h]of d.structIterator()){let S=h.getMergedTraits().xmlName??g,y=c[S]??n[S];m[g]=this.deserializer.readSchema(h,y)}throw this.mixin.decorateServiceException(Object.assign(p,f,{$fault:d.getMergedTraits().error,message:u},m),n)}loadQueryErrorCode(e,r){let o=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(o!==void 0)return o;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}};var Zi=/\d{12}\.ddb/;async function Nn(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&J(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let s=await e.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?J(t,"RETRY_MODE_ADAPTIVE","F"):J(t,"RETRY_MODE_STANDARD","E"):J(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let s=t.endpointV2;switch(String(s?.url?.hostname).match(Zi)&&J(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":J(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":J(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":J(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let s=n;s.accountId&&J(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,c]of Object.entries(s.$source??{}))J(t,i,c)}}var Rr="user-agent",Et="x-amz-user-agent";var kn=/[^!$%&'*+\-.^_`|~\w]/g,$n=/[^!$%&'*+\-.^_`|~\w#]/g;function Un(t){let e="";for(let r in t){let o=t[r];if(e.length+o.length+1<=1024){e.length?e+=","+o:e+=o;continue}break}return e}var ea=t=>(e,r)=>async o=>{let{request:n}=o;if(!v.isInstance(n))return e(o);let{headers:s}=n,i=r?.userAgent?.map(xt)||[],c=(await t.defaultUserAgentProvider()).map(xt);await Nn(r,t,o);let u=r;c.push(`m/${Un(Object.assign({},r.__smithy_context?.features,u.__aws_sdk_context?.features))}`);let a=t?.customUserAgent?.map(xt)||[],f=await t.userAgentAppId();f&&c.push(xt(["app",`${f}`]));let d=Wo(),l=(d?[d]:[]).concat([...c,...i,...a]).join(" "),p=[...c.filter(m=>m.startsWith("aws-sdk-")),...a].join(" ");return t.runtime!=="browser"?(p&&(s[Et]=s[Et]?`${s[Rr]} ${p}`:p),s[Rr]=l):s[Et]=l,e({...o,request:n})},xt=t=>{let e=t[0].split("/").map(i=>i.replace(kn,"-")).join("/"),r=t[1]?.replace($n,"-"),o=e.indexOf("/"),n=e.substring(0,o),s=e.substring(o+1);return n==="api"&&(s=s.toLowerCase()),[n,s,r].filter(i=>i&&i.length>0).reduce((i,c,u)=>{switch(u){case 0:return c;case 1:return`${i}/${c}`;default:return`${i}#${c}`}},"")},ta={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Fn=t=>({applyToStack:e=>{e.add(ea(t),ta)}});var zn=!1;var jn=!1;var Bn=new Set,Gn=(t,e=pe)=>{if(!Bn.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Bn.add(t)};var wt=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips"));var Wn=t=>wt(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t;var qn=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let o=typeof e=="function"?await e():e,n=Wn(o);return Gn(n),n},useFipsEndpoint:async()=>{let o=typeof e=="string"?e:await e();return wt(o)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})};var Vn="content-length";function ra(t){return e=>async r=>{let o=r.request;if(v.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Vn)===-1)try{let i=t(n);o.headers={...o.headers,[Vn]:String(i)}}catch{}}return e({...r,request:o})}}var oa={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Kn=t=>({applyToStack:e=>{e.add(ra(t.bodyLengthChecker),oa)}});var Yn=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),ca(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!aa(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},na=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,sa=/(\d+\.){3}\d+/,ia=/\.\./;var aa=t=>na.test(t)&&!sa.test(t)&&!ia.test(t),ca=t=>{let[e,r,o,,,n]=t.split(":"),s=e==="arn"&&t.split(":").length>=6,i=!!(s&&r&&o&&n);if(s&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i};var Jn=(t,e,r)=>{let o=async()=>{let n=r[t]??r[e];return typeof n=="function"?n():n};return t==="credentialScope"||e==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.credentialScope??n?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.accountId??n?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let n=await o();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:s,hostname:i,port:c,path:u}=n;return`${s}//${i}${c?":"+c:""}${u}`}}return n}:o};var bt=async t=>{};var Tt=t=>typeof t=="object"?"url"in t?Ce(t.url):t:Ce(t);var Xn=async(t,e,r,o)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await bt(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Tt(i)),r.isCustomEndpoint=!0)}let n=await ua(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},ua=async(t,e,r)=>{let o={},n=e?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(n))switch(i.type){case"staticContextParams":o[s]=i.value;break;case"contextParams":o[s]=t[i.name];break;case"clientContextParams":case"builtInParams":o[s]=await Jn(i.name,s,r)();break;case"operationContextParams":o[s]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await Yn(o),o};var Qn=({config:t,instructions:e})=>(r,o)=>async n=>{t.isCustomEndpoint&&So(o,"ENDPOINT_OVERRIDE","N");let s=await Xn(n.input,{getEndpointParameterInstructions(){return e}},{...t},o);o.endpointV2=s,o.authSchemes=s.properties?.authSchemes;let i=o.authSchemes?.[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let u=z(o)?.selectedHttpAuthScheme?.httpAuthOption;u&&(u.signingProperties=Object.assign(u.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})};var da={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Gr.name},Zn=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Qn({config:t,instructions:e}),da)}});var es=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:o,useFipsEndpoint:n}=t,s=r!=null?async()=>Tt(await L(r)()):void 0,c=Object.assign(t,{endpoint:s,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:L(o??!1),useFipsEndpoint:L(n??!1)}),u;return c.serviceConfiguredEndpoint=async()=>(t.serviceId&&!u&&(u=bt(t.serviceId)),u),c};var ne;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(ne||(ne={}));var ye=3,_r=ne.STANDARD;var ts=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],rs=["TimeoutError","RequestTimeout","RequestTimeoutException"],os=[500,502,503,504],ns=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ss=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"];var la=t=>t?.$retryable!==void 0;var fa=t=>t.$metadata?.clockSkewCorrected,pa=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Rt=t=>t.$metadata?.httpStatusCode===429||ts.includes(t.name)||t.$retryable?.throttling==!0,At=(t,e=0)=>la(t)||fa(t)||rs.includes(t.name)||ns.includes(t?.code||"")||ss.includes(t?.code||"")||os.includes(t.$metadata?.httpStatusCode||0)||pa(t)||t.cause!==void 0&&e<=10&&At(t.cause,e+1),is=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!At(t)}return!1};var _t=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>t.setTimeoutFn(o,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Rt(e)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let o=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};var as="amz-sdk-invocation-id",cs="amz-sdk-request";var ds=()=>{let t=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*t)),setDelayBase:o=>{t=o}}};var vr=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(2e4,t),getRetryCost:()=>r});var Oe=class{maxAttempts;mode=ne.STANDARD;capacity=500;retryBackoffStrategy=ds();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return vr({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,r){let o=await this.getMaxAttempts();if(this.shouldRetry(e,r,o)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,c=this.getCapacityCost(n);return this.capacity-=c,vr({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${ye}`),ye}}shouldRetry(e,r,o){return e.getRetryCount()+1<o&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?10:5}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};var vt=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=ne.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:o}=r??{};this.rateLimiter=o??new _t,this.standardRetryStrategy=new Oe(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};var ls=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`);var fs=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:o}=t,n=L(o??ye);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>e||(await L(r)()===ne.ADAPTIVE?new vt(n):new Oe(n))})};var ps=t=>t?.body instanceof ReadableStream;var ga=t=>(e,r)=>async o=>{let n=await t.retryStrategy(),s=await t.maxAttempts();if(ya(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),c=new Error,u=0,a=0,{request:f}=o,d=v.isInstance(f);for(d&&(f.headers[as]=He());;)try{d&&(f.headers[cs]=`attempt=${u+1}; max=${s}`);let{response:l,output:p}=await e(o);return n.recordSuccess(i),p.$metadata.attempts=u+1,p.$metadata.totalRetryDelay=a,{response:l,output:p}}catch(l){let p=Sa(l);if(c=ls(l),d&&ps(f))throw(r.logger instanceof Pe?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),c;try{i=await n.refreshRetryTokenForRetry(i,p)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=u+1,c.$metadata.totalRetryDelay=a,c}u=i.getRetryCount();let m=i.getRetryDelay();a+=m,await new Promise(g=>setTimeout(g,m))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,o)},ya=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Sa=t=>{let e={error:t,errorType:Ea(t)},r=wa(t.$response);return r&&(e.retryAfterHint=r),e},Ea=t=>Rt(t)?"THROTTLING":At(t)?"TRANSIENT":is(t)?"SERVER_ERROR":"CLIENT_ERROR",xa={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ms=t=>({applyToStack:e=>{e.add(ga(t),xa)}}),wa=t=>{if(!U.isInstance(t))return;let e=Object.keys(t.headers).find(s=>s.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],o=Number(r);return Number.isNaN(o)?new Date(r):new Date(o*1e3)};var gs=async(t,e,r)=>({operation:z(e).operation,region:await L(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ba(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function hs(t){return{schemeId:"smithy.api#noAuth"}}var ys=t=>{let e=[];switch(t.operation){case"AssumeRoleWithSAML":{e.push(hs(t));break}case"AssumeRoleWithWebIdentity":{e.push(hs(t));break}default:e.push(ba(t))}return e},Ta=t=>Object.assign(t,{stsClientCtor:Me}),Ss=t=>{let e=Ta(t),r=wn(e);return Object.assign(r,{authSchemePreference:L(t.authSchemePreference??[])})};var Es=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),xs={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var ws={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.946.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn g:vitest run","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.946.0","@aws-sdk/credential-provider-node":"3.946.0","@aws-sdk/middleware-host-header":"3.936.0","@aws-sdk/middleware-logger":"3.936.0","@aws-sdk/middleware-recursion-detection":"3.936.0","@aws-sdk/middleware-user-agent":"3.946.0","@aws-sdk/region-config-resolver":"3.936.0","@aws-sdk/types":"3.936.0","@aws-sdk/util-endpoints":"3.936.0","@aws-sdk/util-user-agent-browser":"3.936.0","@aws-sdk/util-user-agent-node":"3.946.0","@smithy/config-resolver":"^4.4.3","@smithy/core":"^3.18.7","@smithy/fetch-http-handler":"^5.3.6","@smithy/hash-node":"^4.2.5","@smithy/invalid-dependency":"^4.2.5","@smithy/middleware-content-length":"^4.2.5","@smithy/middleware-endpoint":"^4.3.14","@smithy/middleware-retry":"^4.4.14","@smithy/middleware-serde":"^4.2.6","@smithy/middleware-stack":"^4.2.5","@smithy/node-config-provider":"^4.3.5","@smithy/node-http-handler":"^4.4.5","@smithy/protocol-http":"^5.3.5","@smithy/smithy-client":"^4.9.10","@smithy/types":"^4.9.0","@smithy/url-parser":"^4.2.5","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.13","@smithy/util-defaults-mode-node":"^4.2.16","@smithy/util-endpoints":"^3.2.5","@smithy/util-middleware":"^4.2.5","@smithy/util-retry":"^4.2.5","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Cr=t=>new TextEncoder().encode(t);var Aa=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Cr;function se(t){return t instanceof Uint8Array?t:typeof t=="string"?Aa(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Ne(t){return typeof t=="string"?t.length===0:t.byteLength===0}var Ir={name:"SHA-256"},Pr={name:"HMAC",hash:Ir},bs=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var _a={};function ke(){return typeof window<"u"?window:typeof self<"u"?self:_a}var Dr=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Ne(e)){var r=se(e),o=new Uint8Array(this.toHash.byteLength+r.byteLength);o.set(this.toHash,0),o.set(r,this.toHash.byteLength),this.toHash=o}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return ke().crypto.subtle.sign(Pr,r,e.toHash).then(function(o){return new Uint8Array(o)})}):Ne(this.toHash)?Promise.resolve(bs):Promise.resolve().then(function(){return ke().crypto.subtle.digest(Ir,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,o){ke().crypto.subtle.importKey("raw",se(e.secret),Pr,!1,["sign"]).then(r,o)}),this.key.catch(function(){}))},t})();function Ts(t,e,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(f){try{a(o.next(f))}catch(d){i(d)}}function u(f){try{a(o.throw(f))}catch(d){i(d)}}function a(f){f.done?s(f.value):n(f.value).then(c,u)}a((o=o.apply(t,e||[])).next())})}function Rs(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,n,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(a){return function(f){return u([a,f])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(r=0)),r;)try{if(o=1,n&&(s=a[0]&2?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[a[0]&2,s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(a[0]===6&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(f){a=[6,f],n=0}finally{o=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var $=64,As=32,_s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vs=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Cs=Math.pow(2,53)-1;var qe=(function(){function t(){this.state=Int32Array.from(vs),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,o=e.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>Cs)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=e[r++],o--,this.bufferLength===$&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(r.setUint8(this.bufferLength++,128),o%$>=$-8){for(var n=this.bufferLength;n<$;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<$-8;n++)r.setUint8(n,0);r.setUint32($-8,Math.floor(e/4294967296),!0),r.setUint32($-4,e),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(As),n=0;n<8;n++)s[n*4]=this.state[n]>>>24&255,s[n*4+1]=this.state[n]>>>16&255,s[n*4+2]=this.state[n]>>>8&255,s[n*4+3]=this.state[n]>>>0&255;return s},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,o=e.state,n=o[0],s=o[1],i=o[2],c=o[3],u=o[4],a=o[5],f=o[6],d=o[7],l=0;l<$;l++){if(l<16)this.temp[l]=(r[l*4]&255)<<24|(r[l*4+1]&255)<<16|(r[l*4+2]&255)<<8|r[l*4+3]&255;else{var p=this.temp[l-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[l-15];var g=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[l]=(m+this.temp[l-7]|0)+(g+this.temp[l-16]|0)}var h=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&a^~u&f)|0)+(d+(_s[l]+this.temp[l]|0)|0)|0,S=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&s^n&i^s&i)|0;d=f,f=a,a=u,u=c+h|0,c=i,i=s,s=n,n=h+S|0}o[0]+=n,o[1]+=s,o[2]+=i,o[3]+=c,o[4]+=u,o[5]+=a,o[6]+=f,o[7]+=d},t})();var Is=(function(){function t(e){this.secret=e,this.hash=new qe,this.reset()}return t.prototype.update=function(e){if(!(Ne(e)||this.error))try{this.hash.update(se(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Ts(this,void 0,void 0,function(){return Rs(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new qe,this.secret){this.outer=new qe;var e=va(this.secret),r=new Uint8Array($);r.set(e);for(var o=0;o<$;o++)e[o]^=54,r[o]^=92;this.hash.update(e),this.outer.update(r);for(var o=0;o<e.byteLength;o++)e[o]=0}},t})();function va(t){var e=se(t);if(e.byteLength>$){var r=new qe;r.update(e),e=r.digest()}var o=new Uint8Array($);return o.set(e),o}var Ca=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Ps(t){if(Ia(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Pa(e)}return!1}function Ia(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Pa(t){return t&&Ca.every(function(e){return typeof t[e]=="function"})}var Ds=(function(){function t(e){Ps(ke())?this.hash=new Dr(e):this.hash=new Is(e)}return t.prototype.update=function(e,r){this.hash.update(se(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();var Ms=({serviceId:t,clientVersion:e})=>async r=>{let o=typeof window<"u"?window.navigator:void 0,n=o?.userAgent??"",s=o?.userAgentData?.platform??Os.os(n)??"other",i=void 0,c=o?.userAgentData?.brands??[],u=c[c.length-1],a=u?.brand??Os.browser(n)??"unknown",f=u?.version??"unknown",d=[["aws-sdk-js",e],["ua","2.1"],[`os/${s}`,i],["lang/js"],["md/browser",`${a}_${f}`]];t&&d.push([`api/${t}`,e]);let l=await r?.userAgentAppId?.();return l&&d.push([`app/${l}`]),d},Os={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}};var Ns=t=>()=>Promise.reject(t);var ks=["in-region","cross-region","mobile","standard","legacy"];var $s=({defaultsMode:t}={})=>Jo(async()=>{let e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(Da()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ks.join(", ")}, got ${e}`)}}),Da=()=>{let t=window?.navigator;if(t?.connection){let{effectiveType:e,rtt:r,downlink:o}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(o)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1};j();var Vs="required",E="type";var x="argv";var ue="booleanEquals",I="stringEquals",Ks="sigv4";var Ys="us-east-1",_="endpoint",Us="https://sts.{Region}.{PartitionResult#dnsSuffix}",Z="tree",$e="error",Mr="getAttr",Ls={[Vs]:!1,[E]:"string"},Or={[Vs]:!0,default:!1,[E]:"boolean"},Js={ref:"Endpoint"},Hs={fn:"isSet",[x]:[{ref:"Region"}]},P={ref:"Region"},Fs={fn:"aws.partition",[x]:[P],assign:"PartitionResult"},Xs={ref:"UseFIPS"},Qs={ref:"UseDualStack"},N={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Ks,signingName:"sts",signingRegion:Ys}]},headers:{}},F={},zs={conditions:[{fn:I,[x]:[P,"aws-global"]}],[_]:N,[E]:_},Zs={fn:ue,[x]:[Xs,!0]},ei={fn:ue,[x]:[Qs,!0]},js={fn:Mr,[x]:[{ref:"PartitionResult"},"supportsFIPS"]},ti={ref:"PartitionResult"},Bs={fn:ue,[x]:[!0,{fn:Mr,[x]:[ti,"supportsDualStack"]}]},Gs=[{fn:"isSet",[x]:[Js]}],Ws=[Zs],qs=[ei],Oa={version:"1.0",parameters:{Region:Ls,UseDualStack:Or,UseFIPS:Or,Endpoint:Ls,UseGlobalEndpoint:Or},rules:[{conditions:[{fn:ue,[x]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[x]:Gs},Hs,Fs,{fn:ue,[x]:[Xs,!1]},{fn:ue,[x]:[Qs,!1]}],rules:[{conditions:[{fn:I,[x]:[P,"ap-northeast-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"ap-south-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"ap-southeast-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"ap-southeast-2"]}],endpoint:N,[E]:_},zs,{conditions:[{fn:I,[x]:[P,"ca-central-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"eu-central-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"eu-north-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"eu-west-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"eu-west-2"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"eu-west-3"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"sa-east-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,Ys]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"us-east-2"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"us-west-1"]}],endpoint:N,[E]:_},{conditions:[{fn:I,[x]:[P,"us-west-2"]}],endpoint:N,[E]:_},{endpoint:{url:Us,properties:{authSchemes:[{name:Ks,signingName:"sts",signingRegion:"{Region}"}]},headers:F},[E]:_}],[E]:Z},{conditions:Gs,rules:[{conditions:Ws,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[E]:$e},{conditions:qs,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[E]:$e},{endpoint:{url:Js,properties:F,headers:F},[E]:_}],[E]:Z},{conditions:[Hs],rules:[{conditions:[Fs],rules:[{conditions:[Zs,ei],rules:[{conditions:[{fn:ue,[x]:[!0,js]},Bs],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:F,headers:F},[E]:_}],[E]:Z},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[E]:$e}],[E]:Z},{conditions:Ws,rules:[{conditions:[{fn:ue,[x]:[js,!0]}],rules:[{conditions:[{fn:I,[x]:[{fn:Mr,[x]:[ti,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:F,headers:F},[E]:_},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:F,headers:F},[E]:_}],[E]:Z},{error:"FIPS is enabled but this partition does not support FIPS",[E]:$e}],[E]:Z},{conditions:qs,rules:[{conditions:[Bs],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:F,headers:F},[E]:_}],[E]:Z},{error:"DualStack is enabled but this partition does not support DualStack",[E]:$e}],[E]:Z},zs,{endpoint:{url:Us,properties:F,headers:F},[E]:_}],[E]:Z}],[E]:Z},{error:"Invalid Configuration: Missing Region",[E]:$e}]},ri=Oa;var Ma=new tt({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),oi=(t,e={})=>Ma.get(t,()=>zo(ri,{endpointParams:t,logger:e.logger}));me.aws=sr;var ni=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??ee,base64Encoder:t?.base64Encoder??we,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??oi,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??ys,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new je},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new et}],logger:t?.logger??new Pe,protocol:t?.protocol??new St({defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15"}),serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??Ce,utf8Decoder:t?.utf8Decoder??H,utf8Encoder:t?.utf8Encoder??X});var si=t=>{let e=$s(t),r=()=>e().then(_n),o=ni(t);return{...o,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Tn,credentialDefaultProvider:t?.credentialDefaultProvider??(n=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??Ms({serviceId:o.serviceId,clientVersion:ws.version}),maxAttempts:t?.maxAttempts??ye,region:t?.region??Ns("Region is missing"),requestHandler:Ve.create(t?.requestHandler??r),retryMode:t?.retryMode??(async()=>(await r()).retryMode||_r),sha256:t?.sha256??Ds,streamCollector:t?.streamCollector??eo,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(zn)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(jn))}};var ii=t=>({setRegion(e){t.region=e},region(){return t.region}}),ai=t=>({region:t.region()});var ci=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,o=t.credentials;return{setHttpAuthScheme(n){let s=e.findIndex(i=>i.schemeId===n.schemeId);s===-1?e.push(n):e.splice(s,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},ui=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()});var di=(t,e)=>{let r=Object.assign(ii(t),Dn(t),Nr(t),ci(t));return e.forEach(o=>o.configure(r)),Object.assign(t,ai(r),On(r),kr(r),ui(r))};var Me=class extends ft{config;constructor(...[e]){let r=si(e||{});super(r),this.initConfig=r;let o=Es(r),n=wo(o),s=fs(n),i=qn(s),c=i,u=es(c),a=Ss(u),f=di(a,e?.extensions||[]);this.config=f,this.middlewareStack.use(so(this.config)),this.middlewareStack.use(Fn(this.config)),this.middlewareStack.use(ms(this.config)),this.middlewareStack.use(Kn(this.config)),this.middlewareStack.use($r(this.config)),this.middlewareStack.use(Ur(this.config)),this.middlewareStack.use(Fr(this.config)),this.middlewareStack.use(Br(this.config,{httpAuthSchemeParametersProvider:gs,identityProviderConfigProvider:async d=>new Ze({"aws.auth#sigv4":d.credentials})})),this.middlewareStack.use(qr(this.config))}destroy(){super.destroy()}};var D=class t extends mt{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};var Ct=class t extends D{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},It=class t extends D{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Pt=class t extends D{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Dt=class t extends D{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ot=class t extends D{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Mt=class t extends D{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Nt=class t extends D{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},kt=class t extends D{name="InvalidAuthorizationMessageException";$fault="client";constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},$t=class t extends D{name="ExpiredTradeInTokenException";$fault="client";constructor(e){super({name:"ExpiredTradeInTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ut=class t extends D{name="JWTPayloadSizeExceededException";$fault="client";constructor(e){super({name:"JWTPayloadSizeExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Lt=class t extends D{name="OutboundWebIdentityFederationDisabledException";$fault="client";constructor(e){super({name:"OutboundWebIdentityFederationDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ht=class t extends D{name="SessionDurationEscalationException";$fault="client";constructor(e){super({name:"SessionDurationEscalationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}};var Na="Arn";var ka="Account";var $a="ExpiredTokenException",Ua="ExpiredTradeInTokenException";var La="GetCallerIdentity",Ha="GetCallerIdentityRequest",Fa="GetCallerIdentityResponse";var za="InvalidAuthorizationMessageException",ja="IDPCommunicationErrorException",Ba="IDPRejectedClaimException",Ga="InvalidIdentityTokenException",Wa="JWTPayloadSizeExceededException";var qa="MalformedPolicyDocumentException";var Va="OutboundWebIdentityFederationDisabledException";var Ka="PackedPolicyTooLargeException";var Ya="RegionDisabledException";var Ja="SessionDurationEscalationException";var Xa="UserId";var W="awsQueryError",q="client";var V="error",K="httpError",Y="message";var li="smithy.ts.sdk.synthetic.com.amazonaws.sts";var w="com.amazonaws.sts";var Qa=[-3,w,$a,{[V]:q,[K]:400,[W]:["ExpiredTokenException",400]},[Y],[0]];C.for(w).registerError(Qa,Ct);var Za=[-3,w,Ua,{[V]:q,[K]:400,[W]:["ExpiredTradeInTokenException",400]},[Y],[0]];C.for(w).registerError(Za,$t);var ec=[3,w,Ha,0,[],[]],tc=[3,w,Fa,0,[Xa,ka,Na],[0,0,0]];var rc=[-3,w,ja,{[V]:q,[K]:400,[W]:["IDPCommunicationError",400]},[Y],[0]];C.for(w).registerError(rc,Nt);var oc=[-3,w,Ba,{[V]:q,[K]:403,[W]:["IDPRejectedClaim",403]},[Y],[0]];C.for(w).registerError(oc,Ot);var nc=[-3,w,za,{[V]:q,[K]:400,[W]:["InvalidAuthorizationMessageException",400]},[Y],[0]];C.for(w).registerError(nc,kt);var sc=[-3,w,Ga,{[V]:q,[K]:400,[W]:["InvalidIdentityToken",400]},[Y],[0]];C.for(w).registerError(sc,Mt);var ic=[-3,w,Wa,{[V]:q,[K]:400,[W]:["JWTPayloadSizeExceededException",400]},[Y],[0]];C.for(w).registerError(ic,Ut);var ac=[-3,w,qa,{[V]:q,[K]:400,[W]:["MalformedPolicyDocument",400]},[Y],[0]];C.for(w).registerError(ac,It);var cc=[-3,w,Va,{[V]:q,[K]:403,[W]:["OutboundWebIdentityFederationDisabledException",403]},[Y],[0]];C.for(w).registerError(cc,Lt);var uc=[-3,w,Ka,{[V]:q,[K]:400,[W]:["PackedPolicyTooLarge",400]},[Y],[0]];C.for(w).registerError(uc,Pt);var dc=[-3,w,Ya,{[V]:q,[K]:403,[W]:["RegionDisabledException",403]},[Y],[0]];C.for(w).registerError(dc,Dt);var lc=[-3,w,Ja,{[V]:q,[K]:403,[W]:["SessionDurationEscalationException",403]},[Y],[0]];C.for(w).registerError(lc,Ht);var fc=[-3,li,"STSServiceException",0,[],[]];C.for(li).registerError(fc,D);var fi=[9,w,La,0,()=>ec,()=>tc];var Ft=class extends We.classBuilder().ep(xs).m(function(e,r,o,n){return[Zn(o,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").sc(fi).build(){};var pc=new Me,OS=async()=>pc.send(new Ft);export{OS as handler};
